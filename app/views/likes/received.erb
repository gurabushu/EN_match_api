<div class="header-nav-wrapper">
  <header class="header-top-login">
    <h1>エンジニア同士がスキルで<br>繋がれるマッチングアプリ</h1>
  </header>
  <nav class="nav-bar">
  <p>ようこそ、<%= current_user.name %>さん</p>
    <ul>
      <li><%= link_to "アカウント情報",account_path , class: "nav-link" %></li>
      <li><%= link_to "マイプロフィール", user_path(current_user), class: "nav-link" %></li>
      <li><%= link_to "いいね管理", likes_path, class: "nav-link" %></li>
      <li><%= link_to "マッチング一覧", matches_path, class: "nav-link" %></li>
      <%= button_to "ログアウト", destroy_user_session_path, method: :delete, data: { turbo: false }, class: "nav-link" %>
    </ul>
  </nav>
</div>

<div class="page-title">
  <h2>いいねしたユーザー/いいねをくれたユーザー一覧</h2>
</div>

<div class="button-group">
<%= link_to "いいねをくれたユーザー一覧" , likes_received_path, class: "btn-element-like" %>
<%= link_to "いいねしたユーザー一覧" , likes_path, class: "btn-element-like" %>
</div>

<% if @likes_received.present? %>
  <% @likes_received.each do |like| %>
    <% user = like.liker %>
    <div class="user-list">
      <%= image_tag user.avatar.attached? ? user.avatar : "default_img.png", class: "user-avatar" %>
      <h3>名前：<%= user.name %></h3>
      <p>スキル: <%= user.skill %></p>
      <p>自己紹介: <%= user.description %></p>
      <p>年齢：<%= user.age %>歳</p>

      <% if user.github.present? %>
        <h4>GitHub: <%= link_to user.github, user.github, target: "_blank" %></h4>
      <% else %>
        <h4>GitHub: 未登録</h4>
      <% end %>

      <p>登録日: <%= user.created_at.strftime("%Y/%m/%d") %></p>

      <div class="like-button">
        <% if current_user && Like.exists?(liked_id: user.id, liker_id: current_user.id) %>
          <% like = Like.find_by(liked_id: user.id, liker_id: current_user.id) %>
          <%= button_to "いいねを取り消す", like_path(like), method: :delete, class: "btn-element-delete" %>
        <% elsif current_user %>
          <%= button_to "いいね 👍", likes_path, method: :post, params: { liked_id: user.id } %>
        <% end %>
      </div>

    </div> 
  <% end %>
<% else %>
  <h3>いいねしたユーザーはまだいません。</h3>
<% end %>

<div class="back-btn">
  <%= link_to "戻る", root_path, class: "btn-element" %>
</div>